
ImkobUzNewbot.
8570973938:AAHa36c5MFrtEicNbzaGCxzDfuCh9CSor20
#----------------------
LiveConfUz
5179383776:AAG8qov_TAo9TLbFCpUaz5Fi5ExX5b9yADI
#------------------------------------------------

"BOSH OFIS": (40.765167, 72.354389),
    "FURQAT FILIALI": (40.744056, 72.341556),
    "JALAQUDUQ FILIALI": (40.723333, 72.637472),
    "PAXTAOBOD FILIALI": (40.930833, 72.494806),
    "BULOQBOSHI FILIALI": (40.629250, 72.500250),
    "ASAKA FILIALI": (40.645889, 72.244944),
    "JAXON BOZORI FILIALI": (40.824250, 72.351556),
    "FARG'ONA FILIALI": (40.386139, 71.802056),
    "QO'RG'ONTEPA FILIALI": (40.730300, 72.760200),
    "BALIQCHI FILIALI": (40.925500, 71.914400)
#------------------------------------------------
–ù–∞–ø–∏—à–∏ –º–Ω–µ –ë–æ—Ç –Ω–∞ aiogram 3 Python –ø–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –º–µ—Å—Ç–æ–Ω–∞—Ö–æ–¥–Ω–∏–µ –æ—Ñ–∏—Å–∞.
1. –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Ñ–∏—Å–æ–≤ 
2. –ù–∞–¥–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Ñ–∏—Å–∞.
3. –ö–∞–∂–¥—ã–π –æ—Ñ–∏—Å –∏–º–º–µ—Ç ID –Ω–æ–º–µ—Ä –∏ –∫–∞–∂–¥—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç—Å–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –æ—Ñ–∏—Å—É
4. –ö–∞–∂–¥—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –∏–º–º–µ—Ç —Å–≤–æ–π ID –Ω–æ–º–µ—Ä –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –ø–æ–ª–Ω–æ–µ –∏–º—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
5. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –Ω–µ –æ–ø–æ–∑–¥–∞–ª –ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –∏ –Ω–µ —É—à–µ–ª –ª–∏  —Ä–∞—à—å—à–µ –≤—Ä–µ–º–µ–Ω–∏. –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –∏ –∫–æ–Ω–µ—Ü —Ä–∞–±–æ—Ç—ã –∏–∑–≤–µ—Å—Ç–Ω—ã   
6. –î–ª—è –æ–ø—Ä–µ–¥–µ–ª–∏–µ –∏ –¥–ª—è —Å–≤–µ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å QR –∫–æ–¥


–î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–∞–∫–æ–≥–æ –±–æ—Ç–∞ –Ω–∞ aiogram 3 –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –±–∞–∑–∞ 
–¥–∞–Ω–Ω—ã—Ö (–∏—Å–ø–æ–ª—å–∑—É–µ–º SQLite –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã), 
–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ 
(–Ω–∞–ø—Ä–∏–º–µ—Ä, geopy –∏–ª–∏ –ø—Ä–æ—Å—Ç–∞—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞) –∏ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ä–µ–º–µ–Ω–∏.
–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –±–∞–∑–æ–≤—ã–π –∫–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞.


1. pip install aiogram geopy

2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (db.py)
   –ó–¥–µ—Å—å –º—ã —Ö—Ä–∞–Ω–∏–º –æ—Ñ–∏—Å—ã –∏ –ø—Ä–∏–≤—è–∑–∫—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.

#------------------------------------------------------------------------
import sqlite3

class Database:
    def __init__(self, db_file):
        self.conn = sqlite3.connect(db_file)
        self.cursor = self.conn.cursor()
        self.create_tables()

    def create_tables(self):
        # –û—Ñ–∏—Å—ã: id, –Ω–∞–∑–≤–∞–Ω–∏–µ, —à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞, —Ä–∞–¥–∏—É—Å –¥–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç–∏ (–º–µ—Ç—Ä–æ–≤)
        self.cursor.execute("""CREATE TABLE IF NOT EXISTS offices (
            id INTEGER PRIMARY KEY,
            name TEXT,
            lat REAL,
            lon REAL,
            radius INTEGER DEFAULT 100
        )""")
        # –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏: id, telegram_id, –∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω, id_–æ—Ñ–∏—Å–∞
        self.cursor.execute("""CREATE TABLE IF NOT EXISTS users (
            user_id INTEGER PRIMARY KEY,
            full_name TEXT,
            phone TEXT,
            office_id INTEGER,
            FOREIGN KEY(office_id) REFERENCES offices(id)
        )""")
        self.conn.commit()

    def get_user(self, user_id):
        return self.cursor.execute("SELECT * FROM users WHERE user_id = ?", (user_id,)).fetchone()

    def get_office(self, office_id):
        return self.cursor.execute("SELECT * FROM offices WHERE id = ?", (office_id,)).fetchone()
#------------------------------------------------------------------------

3. –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –±–æ—Ç–∞ (main.py)
   –î–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è, QR-–∫–æ–¥ –≤ –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ ‚Äî —ç—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞, 
   –∫–æ—Ç–æ—Ä—É—é –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∏—Å—Ç–µ–º–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ QR: check_in_1 –≥–¥–µ 1 ‚Äî ID –æ—Ñ–∏—Å–∞).

#---------------------------------------------------------
import asyncio
from datetime import datetime
from aiogram import Bot, Dispatcher, types, F
from aiogram.filters import Command
from geopy.distance import geodesic
from db import Database

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
API_TOKEN = '–í–ê–®_–¢–û–ö–ï–ù'
WORKING_START = "09:00"
WORKING_END = "18:00"

bot = Bot(token=API_TOKEN)
dp = Dispatcher()
db = Database("discipline.db")

# 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è)
@dp.message(Command("start"))
async def start(message: types.Message):
    user = db.get_user(message.from_user.id)
    if not user:
        await message.answer("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.")
    else:
        await message.answer("–°–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ –≤ –æ—Ñ–∏—Å–µ –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏.")

# 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ "—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è" QR-–∫–æ–¥–∞
# –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, QR-–∫–æ–¥ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Å—ã–ª–∫—É –≤ –±–æ—Ç–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º /start checkin_1
@dp.message(F.text.startswith("checkin_"))
async def handle_checkin(message: types.Message):
    office_id = int(message.text.split("_")[1])
    user = db.get_user(message.from_user.id)

    if not user or user[3] != office_id:
        await message.answer("–û—à–∏–±–∫–∞: –í—ã –Ω–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã –∫ —ç—Ç–æ–º—É –æ—Ñ–∏—Å—É!")
        return

    # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
    kb = [[types.KeyboardButton(text="–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é", request_location=True)]]
    keyboard = types.ReplyKeyboardMarkup(keyboard=kb, resize_keyboard=True, one_time_keyboard=True)
    await message.answer("–î–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é.", reply_markup=keyboard)

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –∏ –≤—Ä–µ–º–µ–Ω–∏
@dp.message(F.location)
async def check_location(message: types.Message):
    user = db.get_user(message.from_user.id)
    office = db.get_office(user[3])
    
    user_coords = (message.location.latitude, message.location.longitude)
    office_coords = (office[2], office[3])
    
    distance = geodesic(user_coords, office_coords).meters

    if distance <= office[4]: # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–¥–∏—É—Å–∞
        now = datetime.now().time()
        start_time = datetime.strptime(WORKING_START, "%H:%M").time()
        end_time = datetime.strptime(WORKING_END, "%H:%M").time()

        status = ""
        if now > start_time and now < end_time:
            status = f" –ü—Ä–∏–±—ã–ª–∏, –Ω–æ —Å –æ–ø–æ–∑–¥–∞–Ω–∏–µ–º (–ø–æ—Å–ª–µ {WORKING_START})"
        elif now <= start_time:
            status = " –í–æ–≤—Ä–µ–º—è! –•–æ—Ä–æ—à–µ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è."
        else:
            status = "–†–∞–±–æ—á–∏–π –¥–µ–Ω—å —É–∂–µ –∑–∞–∫–æ–Ω—á–µ–Ω."

        await message.answer(f"–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ.\n–î–∏—Å—Ç–∞–Ω—Ü–∏—è –¥–æ –æ—Ñ–∏—Å–∞: {int(distance)}–º.\n–°—Ç–∞—Ç—É—Å: {status}")
    else:
        await message.answer(f"? –í—ã —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ –æ—Ç –æ—Ñ–∏—Å–∞ ({int(distance)}–º)!")

async def main():
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())

#---------------------------------------------------------

–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–õ–æ–≥–∏–∫–∞ 2026):
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: –°–æ–¥–µ—Ä–∂–∏—Ç GPS-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–∞–∂–¥–æ–≥–æ –æ—Ñ–∏—Å–∞.
QR-–∫–æ–¥: –í—ã –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç–µ QR-–∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ 
–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, checkin_1).

–ì–µ–æ–ø–æ–∑–∏—Ü–∏—è: 
   –ü–æ—Å–ª–µ "—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è" –±–æ—Ç –ø—Ä–æ—Å–∏—Ç –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É 
  "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é". –≠—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –æ–±–º–∞–Ω–∞ (—á–µ–ª–æ–≤–µ–∫ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç, –Ω–∞—Ö–æ–¥—è—Å—å –¥–æ–º–∞).

–ü—Ä–æ–≤–µ—Ä–∫–∞:
–ë–æ—Ç –≤—ã—á–∏—Å–ª—è–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º –∏ –æ—Ñ–∏—Å–æ–º —á–µ—Ä–µ–∑ geopy.
–ï—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ < 100 –º–µ—Ç—Ä–æ–≤, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–µ–∫—É—â–µ–µ —Å–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è.
–ï—Å–ª–∏ –≤—Ä–µ–º—è > 09:00, –±–æ—Ç —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –æ–ø–æ–∑–¥–∞–Ω–∏–µ.
–í—ã—Ö–æ–¥: –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–Ω–æ–ø–∫—É checkout, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, 
–Ω–µ —É—à–µ–ª –ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ —Ä–∞–Ω—å—à–µ 18:00.


                                    –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã:
–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: 
–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –æ—Ñ–∏—Å–æ–≤ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ user_id —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.
–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: 
–¢–∞–±–ª–∏—Ü—É attendance, –∫—É–¥–∞ –±—É–¥—É—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –≤—Ä–µ–º—è –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞ –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤.
–ó–∞—â–∏—Ç–∞ –æ—Ç Fake GPS: –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Telegram –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–∏—Ç—å 
Fake GPS —Å–ª–æ–∂–Ω–æ, –Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É 
request_location —è–≤–ª—è–µ—Ç—Å—è —Å–∞–º—ã–º –Ω–∞–¥–µ–∂–Ω—ã–º –º–µ—Ç–æ–¥–æ–º.


CREATE TABLE IF NOT EXISTS offices ('\

–¢–∞–±–ª–∏—Ü–∞ –∏–º–µ–µ—Ç —Ç–∞–∫–∏–µ –ø–æ–ª—è
id,name,lat,lon,radius

–ö–∞–∫ –≤—Å—Ç–∞–≤–∏—Ç –≤  —Ç–∞–ª–∏—Ü—É —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π –æ–¥–Ω–∏–º —Ä–∞–∑–æ–º
–Ω–∞ python sqlite ?

1,"BOSH OFIS",40.765167, 72.354389,25
2,"FURQAT FILIALI",40.744056, 72.341556,25
3,"JALAQUDUQ FILIALI",40.723333, 72.637472,25
4,"PAXTAOBOD FILIALI",40.930833, 72.494806,25
5,"BULOQBOSHI FILIALI",40.629250, 72.500250,25
6,"ASAKA FILIALI",40.645889, 72.244944,25
7,"JAXON BOZORI FILIALI",40.824250, 72.351556,25
8,"FARG'ONA FILIALI",40.386139, 71.802056,25
9,"QO'RG'ONTEPA FILIALI": 40.730300, 72.760200,25
10,"BALIQCHI FILIALI",40.925500, 71.914400,25
#----------------------------------
import sqlite3

# –î–∞–Ω–Ω—ã–µ –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–∞ –∫–æ—Ä—Ç–µ–∂–µ–π
data = [
    (1, "BOSH OFIS", 40.765167, 72.354389, 25),
    (2, "FURQAT FILIALI", 40.744056, 72.341556, 25),
    (3, "JALAQUDUQ FILIALI", 40.723333, 72.637472, 25),
    (4, "PAXTAOBOD FILIALI", 40.930833, 72.494806, 25),
    (5, "BULOQBOSHI FILIALI", 40.629250, 72.500250, 25),
    (6, "ASAKA FILIALI", 40.645889, 72.244944, 25),
    (7, "JAXON BOZORI FILIALI", 40.824250, 72.351556, 25),
    (8, "FARG'ONA FILIALI", 40.386139, 71.802056, 25),
    (9, "QO'RG'ONTEPA FILIALI", 40.730300, 72.760200, 25),
    (10, "BALIQCHI FILIALI", 40.925500, 71.914400, 25)
]

conn = sqlite3.connect('your_database.db')
cursor = conn.cursor()

# –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã '?' –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π
cursor.executemany('''
    INSERT INTO your_table_name (id, name, lat, lon, radius) 
    VALUES (?, ?, ?, ?, ?)
''', data)

conn.commit()
conn.close()

#----------------------------------
# –° –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
import asyncio
import aiosqlite

async def insert_data():
data = [
    (1, "BOSH OFIS", 40.765167, 72.354389, 25),
    (2, "FURQAT FILIALI", 40.744056, 72.341556, 25),
    (3, "JALAQUDUQ FILIALI", 40.723333, 72.637472, 25),
    (4, "PAXTAOBOD FILIALI", 40.930833, 72.494806, 25),
    (5, "BULOQBOSHI FILIALI", 40.629250, 72.500250, 25),
    (6, "ASAKA FILIALI", 40.645889, 72.244944, 25),
    (7, "JAXON BOZORI FILIALI", 40.824250, 72.351556, 25),
    (8, "FARG'ONA FILIALI", 40.386139, 71.802056, 25),
    (9, "QO'RG'ONTEPA FILIALI", 40.730300, 72.760200, 25),
    (10, "BALIQCHI FILIALI", 40.925500, 71.914400, 25)
]

    # –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    async with aiosqlite.connect('your_database.db') as db:
        # –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –∫—É—Ä—Å–æ—Ä–∞
        async with db.cursor() as cursor:
            await cursor.executemany('''
                INSERT INTO your_table_name (id, name, lat, lon, radius) 
                VALUES (?, ?, ?, ?, ?)
            ''', data)
        
        # –§–∏–∫—Å–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
        await db.commit()

asyncio.run(insert_data())

‚Ññ-------------------------------------------------------------------------

from aiogram import types
from aiogram.utils.keyboard import ReplyKeyboardBuilder

async def send_phone_request(message: types.Message):
    # –°–æ–∑–¥–∞–µ–º –±–∏–ª–¥–µ—Ä –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    builder = ReplyKeyboardBuilder()
    
    # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –∑–∞–ø—Ä–æ—Å–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞
    builder.row(types.KeyboardButton(
        text="–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ üì±", 
        request_contact=True
    ))

    await message.answer(
        "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º –Ω–æ–º–µ—Ä–æ–º –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:",
        reply_markup=builder.as_markup(resize_keyboard=True, one_time_keyboard=True)
    )

# –•–µ–Ω–¥–ª–µ—Ä –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–∞
@router.message(F.contact)
async def get_contact(message: types.Message):
    contact = message.contact
    await message.answer(
        f"–°–ø–∞—Å–∏–±–æ, {contact.first_name}! –í–∞—à –Ω–æ–º–µ—Ä {contact.phone_number} –ø–æ–ª—É—á–µ–Ω.",
        reply_markup=types.ReplyKeyboardRemove() # –£–±–∏—Ä–∞–µ–º –∫–Ω–æ–ø–∫–∏
    )
‚Ññ-----------------------------------------------------------------------------------------





# 1. –î–æ–±–∞–≤–ª—è–µ–º –∞–¥—Ä–µ—Å —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–≤—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ—é —Å—Å—ã–ª–∫—É)
git remote add origin https://github.com

# 2. –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è main (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç GitHub)
git branch -M main

# 3. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
git push -u origin main
#==========================================================

CREATE TABLE users ( user_id INTEGER PRIMARY KEY, full_name TEXT,  phone TEXT,
        name TEXT,dolj TEXT,office_id INTEGER,prz INTEGER, dat TEXT, 
        FOREIGN KEY(office_id) REFERENCES offices(id))

CREATE TABLE  davomad (id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER,office_id INTEGER,'
        data TEXT,  time TEXT, prz INTEGER,raz TEXT)

–í —Ç–∞–±–ª–∏—Ü–µ davomad –Ω–∞–¥–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –ø–æ –ø–æ–ª—é user_id –∫ –ø–æ–ª—é user_id –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
users –ø—Ä–∏—á–µ–º —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã users –¥–æ–ª–∂–µ–Ω –±—ã—Ç –∫–∞—Å–∫–∞–¥–Ω–æ
=====================================================================

import pandas as pd


def from_to_excel(fi,numspr,dat):

    fil = fi + numspr +".xlsx"
    print("–ó–∞–ø–∏—Å—ã–≤–∞–µ–º", fil)

    #print(f"{fi=} {numspr=} {fil=}")
    #print(dat)

    # –°–æ–∑–¥–∞–µ–º DataFrame (–ø–µ—Ä–≤—ã–π —Å–ø–∏—Å–æ–∫ —Å—Ç–∞–Ω–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–æ–º, –µ—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å columns)
    df = pd.DataFrame(dat[1:], columns=dat[0])

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ —Ñ–∞–π–ª

    df.to_excel(fil, index=False)

'''
–∑–∞–ø–∏—Å–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤ —Ñ–∞–π–ª (Excel/CSV)?
with pd.ExcelWriter('report.xlsx') as writer:
    # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤ —è—á–µ–π–∫—É A1
    pd.DataFrame(['–û—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º']).to_excel(writer, index=False, header=False)
    
    # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º —Ç–∞–±–ª–∏—Ü—É, –Ω–∞—á–∏–Ω–∞—è —Å–æ –≤—Ç–æ—Ä–æ–π —Å—Ç—Ä–æ–∫–∏ (–∏–Ω–¥–µ–∫—Å 1)
    df.to_excel(writer, startrow=1, index=False)

'''

'''
import pandas as pd

# –í–∞—à —Å–ø–∏—Å–æ–∫ N*M
data = [
    ["–ò–º—è", "–í–æ–∑—Ä–∞—Å—Ç", "–ì–æ—Ä–æ–¥"],
    ["–ê–ª–µ–∫—Å–µ–π", 25, "–ú–æ—Å–∫–≤–∞"],
    ["–ú–∞—Ä–∏—è", 30, "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥"]
]

# –°–æ–∑–¥–∞–µ–º DataFrame (–ø–µ—Ä–≤—ã–π —Å–ø–∏—Å–æ–∫ —Å—Ç–∞–Ω–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–æ–º, –µ—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å columns)
df = pd.DataFrame(data[1:], columns=data[0])

# –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ —Ñ–∞–π–ª
df.to_excel("output.xlsx", index=False)

'''

sqlite3.–ú–Ω–µ –Ω—É–∂–µ–Ω Select  –ø–æ davomad –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–ø–æ–ª—å–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π.

CREATE TABLE  offices (id INTEGER PRIMARY KEY,name TEXT,lat REAL,lon REAL,radius INTEGER DEFAULT 100)'
CREATE TABLE  users ( user_id INTEGER PRIMARY KEY, full_name TEXT,  phone TEXT,name TEXT,dolj TEXT,office_id INTEGER,prz INTEGER, dat TEXT, FOREIGN KEY(office_id) REFERENCES offices(id))
CREATE TABLE  davomad (id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER,office_id INTEGER, data TEXT,  time TEXT, prz INTEGER,raz TEXT,FOREIGN  KEY(user_id) REFERENCES  users(user_id) ON DELETE CASCADE'
FROM davomad WHERE user_id = ? AND data = ? AND PRZ = ?


1.  fio –∫–ª—é—á—É user_id  –∏–∑ davomad  –æ—Ç —Ç–∞–±–ª–∏—Ü—ã users->user_id
2   ofice –∫–ª—é—á—É office_id  –∏–∑ davomad  –æ—Ç —Ç–∞–±–ª–∏—Ü—ã offices->id 


SELECT 
    d.*, 
    u.full_name AS fio, 
    o.name AS office
FROM davomad d
LEFT JOIN users u ON d.user_id = u.user_id
LEFT JOIN offices o ON d.office_id = o.id;
--------------------------------------------------

SELECT 
    
    o.name AS office,
    u.name AS fio, 
    u.dolj AS dol, 
    d.data,d.time,d.raz
FROM davomad d
LEFT JOIN users u ON d.user_id = u.user_id
LEFT JOIN offices o ON d.office_id = o.id
WHERE d.data = '2026-02-02';
----------------------------------------------
import sqlite3

# –ó–Ω–∞—á–µ–Ω–∏–µ –¥–∞—Ç—ã, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏
target_date = '2026-02-02'

# –§–æ—Ä–º–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–º "?"
query = """
SELECT 
    o.name AS office,
    u.name AS fio, 
    u.dolj AS dol, 
    d.data, 
    d.time, 
    d.raz
FROM davomad d
LEFT JOIN users u ON d.user_id = u.user_id
LEFT JOIN offices o ON d.office_id = o.id
WHERE d.data = ?
"""

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
with sqlite3.connect('your_database.db') as conn:
    cursor = conn.cursor()
    cursor.execute(query, (target_date,))
    results = cursor.fetchall()

    for row in results:
        print(row)
---------------------------------------------------------------

import sqlite3

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞
user_id = 123
start_date = '2026-02-01'
end_date = '2026-02-10'

# SQL –∑–∞–ø—Ä–æ—Å —Å —Ç—Ä–µ–º—è –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏
query = """
SELECT 
    o.name AS office,
    u.name AS fio, 
    u.dolj AS dol, 
    d.data, 
    d.time, 
    d.raz
FROM davomad d
LEFT JOIN users u ON d.user_id = u.user_id
LEFT JOIN offices o ON d.office_id = o.id
WHERE d.user_id = ? AND d.data BETWEEN ? AND ?
ORDER BY d.data ASC, d.time ASC
"""

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
with sqlite3.connect('your_database.db') as conn:
    cursor = conn.cursor()
    # –ü–µ—Ä–µ–¥–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–≥–æ –≤ —Ç–æ–º –ø–æ—Ä—è–¥–∫–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º —Å—Ç–æ—è—Ç "?" –≤ –∑–∞–ø—Ä–æ—Å–µ
    cursor.execute(query, (user_id, start_date, end_date))
    rows = cursor.fetchall()

    for row in rows:
        print(f"–û—Ñ–∏—Å: {row[0]}, –§–ò–û: {row[1]}, –î–∞—Ç–∞: {row[3]}, –í—Ä–µ–º—è: {row[4]}")








- –ï—Å–ª–∏ –∑–∞–ø–∏—Å—å —Å —Ç–∞–∫–∏–º–∏ user_id, data –∏ prz —É–∂–µ –µ—Å—Ç—å, 
  –±–ª–æ–∫ SELECT –≤–µ—Ä–Ω–µ—Ç –ø—É—Å—Ç–æ—Ç—É, –∏ INSERT –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç.
- –ï—Å–ª–∏ –∑–∞–ø–∏—Å–∏ –Ω–µ—Ç, –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏ SELECT –±—É–¥—É—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω—ã.
